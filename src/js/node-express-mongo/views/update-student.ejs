<% include partials/header %>

<div class="container">

    <h2>Update Student</h2>
    
    <p><a href="/">Home</a><p>

    <form>
        <input type="hidden" name="student_id" id="student_id" value="<%= student._id %>">
        <div class="form-group">
            <label for="first_name">First Name</label>
            <input type="text" name="first_name" id="first_name" value="<%= student.first_name %>">
        </div>

        <div class="form-group">
            <label for="last_name">Last Name</label>
            <input type="text" name="last_name" id="last_name" value="<%= student.last_name %>">
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input type="text" name="email" id="email" value="<%= student.email %>">
        </div>

        <div class="form-group">
            <label for="major">Major</label>
            <input type="text" name="major" id="major" value="<%= student.major %>">
        </div>

        <div class="form-group">
            <label for="gpa">GPA</label>
            <input type="text" name="gpa" id="gpa" value="<%= student.gpa %>">
        </div>

        <a href="#" class="btn btn-success" id="update">Save</a>
    </form>

</div>

<script>
$(document).ready(function () {
    $('#update').on('click', updateStudent)
})

function updateStudent () {
    var student = {
        "id": $('#student_id').val(),
        "first_name": $('#first_name').val(),
        "last_name": $('#last_name').val(),
        "email": $('#email').val(),
        "major": $('#major').val(),
        "gpa": $('#gpa').val()
    }
    $.ajax({
        type: 'PUT',
        url: '/students/update',
        data: student
    }).done(function (response) {
        window.location.replace('/')
    })
    window.location.replace('/')
}
</script>

<% include partials/footer %>